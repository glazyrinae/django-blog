{% load sekizai_tags static %}

{% addtoblock "css" %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.1/nouislider.min.css">
    <style>
        .range-slider-wrapper {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
            padding: 15px;
            margin-bottom: 20px;
        }
        .slider-container {
            padding: 15px;
            border-radius: 5px;
        }
        .d-flex justify-content-between mt-2 {
            display: none !important;
        }
        /* Основные стили для слайдера */
        .noUi-connect {
            background: #5FCB71; /* Цвет заполненной части */
        }
    </style>
{% endaddtoblock %}
{% addtoblock "js_footer" %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.1/nouislider.min.js"></script>
    <script src="{% static 'search/js/range.js' %}"></script>
{% endaddtoblock %}



<div class="mb-4 range-slider-wrapper" 
    data-field-name="{{ field.field_name }}"
    data-min="{{ field.min_value|default:0 }}"
    data-max="{{ field.max_value|default:100 }}"
    data-step="{{ field.step|default:1 }}">
    
    <label class="form-label">{{ field.label }}</label>
    
    <!-- Контейнер для слайдера -->
    <div class="slider-container mb-3">
        <!-- Сам слайдер (ДОЛЖЕН БЫТЬ ПУСТОЙ DIV) -->
        <div class="slider" id="slider-{{ field.id }}"></div>
        <!-- Поля для ручного ввода -->
        <div class="row mt-3">
            <div class="col">
                <div class="input-group input-group-sm">
                    <span class="input-group-text">От</span>
                    <input type="number" 
                        class="form-control slider-min-input" 
                        min="{{ field.min_value|default:0 }}"
                        max="{{ field.max_value|default:100 }}"
                        step="{{ field.step|default:1 }}">
                </div>
            </div>
            <div class="col">
                <div class="input-group input-group-sm">
                    <span class="input-group-text">До</span>
                    <input type="number" 
                        class="form-control slider-max-input" 
                        min="{{ field.min_value|default:0 }}"
                        max="{{ field.max_value|default:100 }}"
                        step="{{ field.step|default:1 }}">
                </div>
            </div>
        </div>
    </div>
    
    <!-- Скрытые поля -->
    <input type="hidden" name="{{ field.field_name }}_min" class="slider-hidden-min">
    <input type="hidden" name="{{ field.field_name }}_max" class="slider-hidden-max">
</div>
