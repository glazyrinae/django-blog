{% load sekizai_tags static %}

{% addtoblock "css" %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <style>
        .search-field-accordion .accordion-button:focus { box-shadow: none; }
        .search-field-accordion .accordion-button:not(.collapsed) {
            color: inherit;
            background-color: transparent;
            box-shadow: none;
        }
        .date-range-group {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
            padding: 15px;
            margin-bottom: 0;
        }
        .date-range-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .range-title {
            font-weight: 600;
            color: #495057;
        }
        .remove-range {
            cursor: pointer;
            color: #dc3545;
            font-size: 20px;
            line-height: 1;
        }
        .datepicker {
            z-index: 1060 !important;
        }
    </style>
{% endaddtoblock %}
{% addtoblock "js_footer" %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/locales/bootstrap-datepicker.ru.min.js"></script>
    <script src="{% static 'search/js/date_range.js' %}"></script>
{% endaddtoblock %}

<div class="accordion accordion-flush mb-2 search-field-accordion">
    <div class="accordion-item">
        <h2 class="accordion-header" id="date-heading-{{ field.id }}">
            <button class="accordion-button collapsed py-2"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#date-collapse-{{ field.id }}"
                    aria-expanded="false"
                    aria-controls="date-collapse-{{ field.id }}">
                {{ field.label }}
            </button>
        </h2>
        <div id="date-collapse-{{ field.id }}"
             class="accordion-collapse collapse"
             aria-labelledby="date-heading-{{ field.id }}">
            <div class="accordion-body pt-2">
                <div class="date-range-group" 
                    data-range-index="{{ field.id }}" 
                    data-field-type="{{ field.field_type }}">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">ÐžÑ‚</label>
                            <div class="input-group">
                                <input type="text" 
                                        class="form-control date-start"
                                        name="{{ field.field_name }}_min" 
                                        data-range="{{ field.id }}"
                                        placeholder="{{ field.placeholder|default:'Ð´Ð´.Ð¼Ð¼.Ð³Ð³Ð³Ð³' }}"
                                        data-index="{{ field.id }}">
                                <span class="input-group-text">ðŸ“…</span>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Ð”Ð¾</label>
                            <div class="input-group">
                                <input type="text" 
                                        class="form-control date-end" 
                                        name="{{ field.field_name }}_max"
                                        data-range="{{ field.id }}"
                                        placeholder="{{ field.placeholder|default:'Ð´Ð´.Ð¼Ð¼.Ð³Ð³Ð³Ð³' }}"
                                        data-index="{{ field.id }}">
                                <span class="input-group-text">ðŸ“…</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
